//----------------------------------------// HARDWARE CONFIGURATION SECTION//----------------------------------------// pin configuration#define MOTOR_A_PIN     8#define MOTOR_B_PIN     9#define MOTOR_C_PIN     10#define MOTOR_D_PIN     11#define MOTOR_STEPS     200               // value for NEMA23 motors#define MOTOR_SPEED_RPM 60                // desired motor speed in rotations per minute (this is half rotation per second)// this is the max number of steps per iteration. setting this too high will prevent UI to update properly// setting this too low will make motor movement less continuous#define MOTOR_MAX_STEPS_PER_ITERATION 50  //----------------------------------------// motor position feedback settings//----------------------------------------#define ZERO_PIN 0//#define AUTO_ZERO#define MAX_ADC_VALUE 1023#define LCD_TYPE_I2C//#define LCD_TYPE_PARALLEL//----------------------------------------// LCD //----------------------------------------#ifdef LCD_TYPE_PARALLEL// display pins/*  The circuit: * LCD RS pin to digital pin 12 * LCD Enable pin to digital pin 11 * LCD D4 pin to digital pin 10 * LCD D5 pin to digital pin 4 * LCD D6 pin to digital pin 3 * LCD D7 pin to digital pin 2 * LCD R/W pin to ground * LCD VSS pin to ground * LCD VCC pin to 5V * 10K resistor: * ends to +5V and ground * wiper to LCD VO pin (pin 3) */#define LCD_RS_PIN 12#define LCD_EN_PIN 11#define LCD_D4_PIN 10#define LCD_D5_PIN 9#define LCD_D6_PIN 8#define LCD_D7_PIN 7#endif#ifdef  LCD_TYPE_I2C#endif//----------------------------------------// functional parameters//----------------------------------------// this should reflect the max number of steps required to go full scale#define MAX_MOTOR_POSITION 3*MOTOR_STEPS// air volume definitions#define MIN_VOLUME 200#define MAX_VOLUME 700#define VOLUME_INCREMENT 50// breath formulas#define MIN_BPM 8#define MAX_BPM 40#define BPM_INCREMENT 2// ratio between inhalation and exhalation#define INHALE_RATIO 1#define EXHALE_RATIO 2// derived values. do not change#define VOLUME_STEPS ((MAX_VOLUME-MIN_VOLUME)/VOLUME_INCREMENT+1)#define BPM_STEPS ((MAX_BPM-MIN_BPM)/BPM_INCREMENT+1)#define RATIO_TOTAL (INHALE_RATIO+EXHALE_RATIO)#define INHALE_DURATION INHALE_RATIO*60000L/(bpm*RATIO_TOTAL)#define EXHALE_DURATION EXHALE_RATIO*60000L/(bpm*RATIO_TOTAL)//----------------------------------------// time interval for UI refresh//----------------------------------------#define UI_REFRESH_PERIOD 100//----------------------------------------// UI pot locations//----------------------------------------#define BPM_PIN      A0#define VOLUME_PIN   A1//----------------------------------------// look up tables for motor positions//----------------------------------------// linear actuator positions in mm equivalent to each volume stepint motor_positions[VOLUME_STEPS] = {   0,  // rest position  1*MAX_MOTOR_POSITION/(VOLUME_STEPS-1), // MIN_VOLUME  2*MAX_MOTOR_POSITION/(VOLUME_STEPS-1),  3*MAX_MOTOR_POSITION/(VOLUME_STEPS-1),  4*MAX_MOTOR_POSITION/(VOLUME_STEPS-1),  5*MAX_MOTOR_POSITION/(VOLUME_STEPS-1),  6*MAX_MOTOR_POSITION/(VOLUME_STEPS-1),  7*MAX_MOTOR_POSITION/(VOLUME_STEPS-1),  8*MAX_MOTOR_POSITION/(VOLUME_STEPS-1),  9*MAX_MOTOR_POSITION/(VOLUME_STEPS-1),  10*MAX_MOTOR_POSITION/(VOLUME_STEPS-1)// MAX_VOLUME};